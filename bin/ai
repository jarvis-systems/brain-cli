#!/usr/bin/env php
<?php

use BrainCLI\AiServiceProvider;
use BrainCLI\Foundation\Application as LaravelApplication;

defined("OK") || define("OK", 0);
defined("ERROR") || define("ERROR", 1);
defined("DS") || define("DS", DIRECTORY_SEPARATOR);

if (is_file(__DIR__ . DS . '..' . DS . 'vendor' . DS . 'autoload.php')) {
    require __DIR__ . DS . '..' . DS . 'vendor' . DS . 'autoload.php';
} else if (is_file(__DIR__ . DS . '..' . DS . '..' . DS . 'vendor' . DS . 'autoload.php')) {
    require __DIR__ . DS . '..' . DS . '..' . DS . 'vendor' . DS . 'autoload.php';
} else if (is_file(__DIR__ . DS . '..' . DS . 'autoload.php')) {
    require __DIR__ . DS . '..' . DS . 'autoload.php';
} else if (is_file(__DIR__ . DS . '..' . DS . '..' . DS . 'autoload.php')) {
    require __DIR__ . DS . '..' . DS . '..' . DS . 'autoload.php';
} else {
    fwrite(STDERR, "You must set up the project dependencies using Composer." . PHP_EOL);
    exit(1);
}

$laravel = LaravelApplication::create();
$app = AiServiceProvider::bootApplication($laravel);
$provider = AiServiceProvider::create($app, $laravel);
$status = AiServiceProvider::run($app, $provider);

exit($status);
